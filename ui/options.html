<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FormFillr Dynamic Persona Entry</title>
		<link rel="stylesheet" href="options.css" />

		<!-- Load Lucide Icons for better UI on dynamic elements -->
		<!-- <script src="https://unpkg.com/lucide@latest"></script> -->
	</head>
	<body>
		<div class="page">
			<!-- Header Section -->
			<header class="header">
				<div class="logo">
					<!-- Simple SVG Logo -->
					<svg
						viewBox="0 0 24 24"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
					>
						<rect
							x="3"
							y="3"
							width="18"
							height="18"
							rx="4"
							fill="white"
							opacity="0.05"
						/>
						<path
							d="M7 12h10M7 8h10M7 16h6"
							stroke="white"
							stroke-width="1.6"
							stroke-linecap="round"
							stroke-linejoin="round"
							opacity="0.9"
						/>
					</svg>
				</div>
				<div class="title">
					<h1>FormFillr Persona Entry</h1>
					<p class="subtitle">
						Enter your core identity profile for easy form completion.
					</p>
				</div>
			</header>

			<main class="main">
				<!-- 1. Primary Details (Basic Info) -->
				<section class="card">
					<h2 class="section-title">Primary Details</h2>

					<div class="grid-2">
						<!-- Full Name -->
						<div class="form-group">
							<label for="name">Full Name</label>
							<input type="text" id="name" placeholder="e.g. John Doe" />
						</div>

						<!-- Email -->
						<div class="form-group">
							<label for="email">Email Address</label>
							<input
								type="email"
								id="email"
								placeholder="e.g. samuel@example.com"
							/>
						</div>

						<!-- Date of Birth -->
						<div class="form-group">
							<label for="dob">Date of Birth</label>
							<input type="date" id="dob" />
						</div>

						<!-- Gender -->
						<div class="form-group">
							<label for="gender">Gender</label>
							<select id="gender">
								<option value="prefer_not_say" selected>
									Prefer not to say
								</option>
								<option value="male">Male</option>
								<option value="female">Female</option>
								<option value="nonbinary">Non-binary</option>
							</select>
						</div>

						<!-- Role / Occupation -->
						<div class="form-group">
							<label for="role">Role / Occupation</label>
							<input
								type="text"
								id="role"
								placeholder="e.g. Software Engineer"
							/>
						</div>

						<!-- Company / Organization -->
						<div class="form-group">
							<label for="company">Company / Organization</label>
							<input type="text" id="company" placeholder="e.g. Idealabs" />
						</div>

						<!-- Mailing Address -->
						<div class="form-group">
							<label for="address">Mailing Address</label>
							<input
								type="text"
								id="address"
								placeholder="Street, City, State, Zip"
							/>
						</div>

						<!-- Phone Number -->
						<div class="form-group">
							<label for="phone">Phone Number</label>
							<input
								type="tel"
								id="phone"
								placeholder="e.g. +1 (555) 123-4567"
							/>
						</div>
					</div>
				</section>

				<!-- 2. Personal Context & Bio -->
				<section class="card">
					<h2 class="section-title">Personal Context & Bio</h2>
					<div class="bio-section">
						<div class="bio-options">
							<button id="ai-interview-btn" class="btn primary" type="button">
								ü§ñ Generate Bio with AI Interview
							</button>
							<button id="manual-bio-btn" class="btn secondary" type="button">
								‚úèÔ∏è Write Manually
							</button>
						</div>

						<!-- AI Interview Interface (initially hidden) -->
						<div id="ai-interview-container" class="ai-interview hidden">
							<div class="interview-header">
								<h3>AI Interview - Let's build your bio together!</h3>
								<p>
									I'll ask you some questions to create a comprehensive bio.
								</p>
							</div>
							<div id="interview-chat" class="interview-chat">
								<!-- Chat messages will be added here -->
							</div>
							<div class="interview-input">
								<input
									type="text"
									id="interview-answer"
									placeholder="Type your answer here..."
								/>
								<button id="send-answer-btn" class="btn primary">Send</button>
							</div>
							<div class="interview-progress">
								<div class="progress-bar">
									<div id="progress-fill" class="progress-fill"></div>
								</div>
								<span id="progress-text">Question 1 of 8</span>
							</div>
						</div>

						<!-- Manual Bio Input (initially hidden) -->
						<div id="manual-bio-container" class="manual-bio hidden">
							<div class="form-group">
								<label for="bio">
									Short Bio / Context (For vague fields like "Tell us more...")
								</label>
								<textarea
									id="bio"
									rows="10"
									placeholder="Write about your professional background, interests, achievements, and what makes you unique..."
								></textarea>
							</div>
						</div>

						<!-- Generated Bio Preview -->
						<div id="bio-preview-container" class="bio-preview hidden">
							<h4>Generated Bio Preview:</h4>
							<div id="bio-preview" class="bio-preview-text"></div>
							<div class="bio-actions">
								<button id="edit-bio-btn" class="btn secondary">Edit</button>
								<button id="regenerate-bio-btn" class="btn secondary">
									Regenerate
								</button>
								<button id="accept-bio-btn" class="btn primary">
									Accept & Save
								</button>
							</div>
						</div>
					</div>
				</section>

				<!-- Debug Section -->
				<section
					id="debug-section"
					class="card"
					style="
						border: 2px dashed #fbbf24;
						background: rgba(251, 191, 36, 0.05);
						display: none;
					"
				>
					<h2 class="section-title">üîß Debug Tools</h2>
					<p class="subtitle" style="margin-bottom: 12px; color: #f59e0b">
						Use these tools to test the bio generation and see detailed error
						logs.
					</p>
					<div class="flex items-center gap-2" style="margin-bottom: 18px">
						<button id="test-bio-btn" class="btn secondary" type="button">
							üß™ Test Bio Generation
						</button>
						<button id="clear-logs-btn" class="btn secondary" type="button">
							üóëÔ∏è Clear Console Logs
						</button>
					</div>
					<div
						id="debug-output"
						style="
							background: #1f2937;
							color: #e5e7eb;
							padding: 12px;
							border-radius: 6px;
							font-family: monospace;
							font-size: 12px;
							max-height: 200px;
							overflow-y: auto;
							display: none;
						"
					>
						Debug output will appear here...
					</div>
				</section>

				<!-- 3. Dynamic Custom Field Input -->
				<section class="card">
					<h2 class="section-title">Custom Fields</h2>
					<p class="subtitle" style="margin-bottom: 12px">
						Add any extra details (Label and Value) you frequently need to fill
						out on forms.
					</p>

					<!-- Input fields for adding a NEW custom field -->
					<div class="flex items-end gap-2" style="margin-bottom: 18px">
						<div class="form-group" style="margin-bottom: 0; flex-grow: 1.5">
							<label for="new-custom-label">Field Label</label>
							<input
								type="text"
								id="new-custom-label"
								placeholder="e.g., Favorite Color"
							/>
						</div>

						<!-- Data Type Selector -->
						<div class="form-group" style="margin-bottom: 0; flex-grow: 0.5">
							<label for="new-custom-type">Data Type</label>
							<select id="new-custom-type" class="select-custom">
								<option value="text">Text</option>
								<option value="number">Number</option>
								<option value="date">Date</option>
							</select>
						</div>

						<div class="form-group" style="margin-bottom: 0; flex-grow: 2">
							<label for="new-custom-value">Field Value</label>
							<input
								type="text"
								id="new-custom-value"
								placeholder="e.g., Azure"
							/>
						</div>

						<button
							id="add-custom-field-btn"
							class="btn primary"
							title="Add Custom Field"
						>
							&plus;
						</button>
					</div>

					<!-- Container for existing custom fields -->
					<div id="custom-fields-container">
						<!-- Custom fields will be rendered here by JavaScript -->
					</div>
				</section>
			</main>

			<!-- Action Bar -->
			<div class="actions">
				<button class="btn secondary" type="button" id="clear-all-btn">
					Clear All
				</button>
				<button
					class="btn secondary"
					type="button"
					id="load-profile-btn"
					onclick="loadProfile()"
				>
					Load Profile
				</button>
				<button class="btn primary" type="button" id="save-persona">
					Save Persona
				</button>
			</div>

			<!-- Minimal Footer -->
			<footer class="footer">
				<p>FormFillr &copy; 2025</p>
			</footer>
		</div>

		<div id="save-modal" class="save-toast hidden">
			<div class="toast-content">
				<p>‚úÖ Persona saved successfully!</p>
			</div>
		</div>

		<script type="module" src="../scripts/options/index.ts"></script>
	</body>
</html>
